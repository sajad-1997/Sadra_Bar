<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø¨Ø§Ø±Ø¨Ø±ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ† â€“ Ù†Ø³Ø®Ù‡ ÙÙˆÙ‚â€ŒÙ¾ÛŒØ´Ø±ÙØªÙ‡</title>
  <meta name="description" content="Ø³Ø§Ù…Ø§Ù†Ù‡ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø§Ø±Ø¨Ø±ÛŒ Ø¨Ø§ Ø·Ø±Ø§Ø­ÛŒ Ù…Ø¯Ø±Ù†ØŒ Ù†Ù‚Ø´Ù‡ Ø²Ù†Ø¯Ù‡ Ø§ÛŒØ±Ø§Ù†ØŒ ÙˆÛŒØ²Ø§Ø±Ø¯ Ø³ÙØ§Ø±Ø´ØŒ Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ùˆ Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ." />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Swiper -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>

  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Persian Font -->
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{ --accent-1:#0ea5e9; --accent-2:#2563eb; }
    body{ font-family:'Vazirmatn',sans-serif; margin:0; }

    /* Hero */
    .hero-bg{ background: linear-gradient(180deg,rgba(2,6,23,0.4),rgba(2,6,23,0.7)), url('https://images.unsplash.com/photo-1529070538774-1843cb3265df?auto=format&fit=crop&w=1600&q=80') center/cover; background-size:cover; }

    .glass{ backdrop-filter:blur(16px); background:rgba(255,255,255,0.07); border:1px solid rgba(255,255,255,0.08); border-radius:16px; }

    .gradient-text{ background:linear-gradient(90deg,var(--accent-1),var(--accent-2)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }

    #liveMap{ height:420px; width:100%; border-radius:16px; }

    /* Wizard */
    .wizard-step{ display:none; }
    .wizard-step.active{ display:block; }

    /* Timeline */
    .timeline{ counter-reset:step; }
    .timeline-item{ position:relative; padding:1rem 1rem 1rem 3rem; background:#fff; border-radius:10px; }
    .timeline-item + .timeline-item{ margin-top:0.75rem; }
    .timeline-item:before{ counter-increment:step; content:counter(step); width:34px;height:34px; background:var(--accent-2); color:#fff; border-radius:50%; position:absolute; right:-1.7rem; top:1rem; display:flex; align-items:center; justify-content:center; }

    .card{ transition:0.35s; }
    .card:hover{ transform:translateY(-8px); box-shadow:0 20px 40px rgba(0,0,0,0.12); }

    /* responsive small fixes */
    @media (max-width:768px){
      .hero-bg { padding:4rem 0; }
      #liveMap { height:300px; }
    }
  </style>
</head>

<body class="bg-gray-100 text-gray-800">

<!-- TOP BAR -->
<div class="bg-gradient-to-r from-blue-600 to-cyan-500 text-white py-1 text-center text-sm">Ø§Ø±Ø³Ø§Ù„ Ø±Ø§ÛŒÚ¯Ø§Ù† Ø¨Ø±Ø§ÛŒ Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ù„Ø§ÛŒ ÛµÛ°Û° Ù‡Ø²Ø§Ø± ØªÙˆÙ…Ø§Ù† â€” Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Û²Û´/Û·</div>

<!-- HEADER -->
<header class="fixed top-0 left-0 right-0 z-50 bg-white/90 backdrop-blur shadow">
  <div class="max-w-7xl mx-auto px-6 py-3 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <div class="text-2xl font-extrabold text-blue-600">Ø¨Ø§Ø±Ø¨Ø±ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ†</div>
      <span class="hidden sm:inline text-sm text-gray-600">Ø±Ø¯ÛŒØ§Ø¨ÛŒ Û²Û´/Û·</span>
    </div>

    <nav class="hidden md:flex gap-8 items-center text-lg">
      <a href="#services" class="hover:text-blue-600">Ø®Ø¯Ù…Ø§Øª</a>
      <a href="#fleet" class="hover:text-blue-600">Ù†Ø§ÙˆÚ¯Ø§Ù†</a>
      <a href="#pricing" class="hover:text-blue-600">ØªØ¹Ø±ÙÙ‡â€ŒÙ‡Ø§</a>
      <a href="#tracking" class="hover:text-blue-600">Ø±Ø¯ÛŒØ§Ø¨ÛŒ</a>
      <a href="#contact" class="hover:text-blue-600">ØªÙ…Ø§Ø³</a>
    </nav>

    <div class="flex items-center gap-3">
      <button id="themeToggle" aria-label="ØªØºÛŒÛŒØ± Ø­Ø§Ù„Øª" class="p-2 rounded-lg hover:bg-gray-100">ğŸŒ™</button>
      <a id="downloadHtml" class="hidden md:inline-block bg-white text-blue-700 px-3 py-2 rounded-md border">Ø¯Ø§Ù†Ù„ÙˆØ¯ HTML</a>
      <a href="#pricing" class="hidden md:inline-block bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 py-2 rounded-md">Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´</a>
      <button id="openMenu" class="md:hidden p-2 rounded-md bg-gray-100">â˜°</button>
    </div>
  </div>
</header>

<!-- MOBILE PANEL -->
<div id="mobileMenu" class="fixed inset-0 z-40 hidden">
  <div class="absolute inset-0 bg-black/40" onclick="toggleMobile(false)"></div>
  <aside class="absolute right-0 top-0 h-full w-72 bg-white p-6 shadow-lg">
    <div class="flex items-center justify-between mb-6">
      <div class="font-bold text-lg">Ø¨Ø§Ø±Ø¨Ø±ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ†</div>
      <button onclick="toggleMobile(false)" aria-label="Ø¨Ø³ØªÙ†">âœ•</button>
    </div>
    <nav class="flex flex-col gap-3">
      <a href="#services" onclick="toggleMobile(false)" class="py-2">Ø®Ø¯Ù…Ø§Øª</a>
      <a href="#fleet" onclick="toggleMobile(false)" class="py-2">Ù†Ø§ÙˆÚ¯Ø§Ù†</a>
      <a href="#pricing" onclick="toggleMobile(false)" class="py-2">ØªØ¹Ø±ÙÙ‡â€ŒÙ‡Ø§</a>
      <a href="#tracking" onclick="toggleMobile(false)" class="py-2">Ø±Ø¯ÛŒØ§Ø¨ÛŒ</a>
      <a href="#contact" onclick="toggleMobile(false)" class="py-2">ØªÙ…Ø§Ø³</a>
    </nav>
    <div class="mt-6"><a href="#pricing" class="block text-center bg-blue-600 text-white py-2 rounded-md">Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´</a></div>
  </aside>
</div>

<!-- HERO -->
<section class="hero-bg min-h-screen flex items-center justify-center text-center pt-16 pb-24">
  <div class="max-w-4xl p-8 glass text-white">
    <h1 class="text-5xl md:text-7xl font-extrabold gradient-text mb-4">Ø¨Ø§Ø±Ø¨Ø±ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø§ÛŒØ±Ø§Ù†</h1>
    <p class="text-lg md:text-xl mb-6 opacity-90">Ø­Ù…Ù„â€ŒÙˆÙ†Ù‚Ù„ Ø³Ø±ÛŒØ¹ØŒ Ø§Ù…Ù† Ùˆ Ù‚Ø§Ø¨Ù„ Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø¯Ø± Ø³Ø±Ø§Ø³Ø± Ú©Ø´ÙˆØ± â€” Ø¨Ø§ Ù†Ø§ÙˆÚ¯Ø§Ù† Ù…Ø¬Ù‡Ø² Ùˆ Ù†Ù‚Ø´Ù‡ Ø²Ù†Ø¯Ù‡.</p>
    <div class="flex justify-center gap-4 flex-wrap">
      <a href="#order" class="px-8 py-3 bg-blue-600 rounded-xl hover:bg-blue-700 transition">Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´ ÙÙˆØ±ÛŒ</a>
      <a href="#tracking" class="px-8 py-3 bg-white text-blue-600 rounded-xl hover:bg-blue-50 transition">Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ù…Ø±Ø³ÙˆÙ„Ù‡</a>
    </div>
  </div>
</section>

<!-- SERVICES -->
<section id="services" class="py-20">
  <div class="max-w-6xl mx-auto px-6 text-center">
    <h2 class="text-4xl font-bold mb-10">Ø®Ø¯Ù…Ø§Øª Ù…Ø§</h2>

    <div class="grid sm:grid-cols-2 md:grid-cols-3 gap-8">
      <div class="card p-6 bg-white rounded-xl shadow">
        <h3 class="text-xl font-bold mb-2">Ø­Ù…Ù„ Ø¨ÛŒÙ†â€ŒØ´Ù‡Ø±ÛŒ</h3>
        <p class="text-gray-600">Ø§Ø±Ø³Ø§Ù„ Ø¨Ø§Ø± Ø¨Ù‡ ØªÙ…Ø§Ù… Ø§Ø³ØªØ§Ù†â€ŒÙ‡Ø§ÛŒ Ú©Ø´ÙˆØ± Ø¨Ø§ Ø¨ÛŒÙ…Ù‡ Ú©Ø§Ù…Ù„.</p>
      </div>
      <div class="card p-6 bg-white rounded-xl shadow">
        <h3 class="text-xl font-bold mb-2">Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø²Ù†Ø¯Ù‡</h3>
        <p class="text-gray-600">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØª Ú©Ø§Ù…ÛŒÙˆÙ†â€ŒÙ‡Ø§ Ø±ÙˆÛŒ Ù†Ù‚Ø´Ù‡ Ø§ÛŒØ±Ø§Ù†.</p>
      </div>
      <div class="card p-6 bg-white rounded-xl shadow">
        <h3 class="text-xl font-bold mb-2">Ù¾Ø±Ø¯Ø§Ø®Øª Ø¯Ø± Ù…Ø­Ù„</h3>
        <p class="text-gray-600">Ø§Ù…Ú©Ø§Ù† ØªØ³ÙˆÛŒÙ‡ Ø¯Ø± Ù…Ù‚ØµØ¯ Ø¨Ø±Ø§ÛŒ Ø±Ø§Ø­ØªÛŒ Ù…Ø´ØªØ±ÛŒ.</p>
      </div>
    </div>
  </div>
</section>

<!-- FLEET + MAP -->
<section class="py-20 bg-blue-50" id="fleet">
  <div class="max-w-7xl mx-auto px-6 grid md:grid-cols-2 gap-10 items-center">
    <div>
      <h2 class="text-3xl font-bold mb-4">Ù†Ù‚Ø´Ù‡ Ø²Ù†Ø¯Ù‡ Ù†Ø§ÙˆÚ¯Ø§Ù†</h2>
      <p class="mb-4">Ø¨Ø±Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ† Ø¨Ø§Ø±ØŒ Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ ØªØ±Ø§Ù†Ø²ÛŒØªÛŒ Ú©Ù„ÛŒØ¯ÛŒ Ø§ÛŒØ±Ø§Ù† Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§ Ù…ÙˆÙ‚Ø¹ÛŒØª Ù†Ø§ÙˆÚ¯Ø§Ù†.</p>
      <ul class="list-disc list-inside">
        <li>Ù…Ø³ÛŒØ± Ø´Ù…Ø§Ù„â€ŒØºØ±Ø¨ â†’ Ù…Ø±Ú©Ø²</li>
        <li>Ù…Ø³ÛŒØ± Ø´Ø±Ù‚ â†’ ØªÙ‡Ø±Ø§Ù†</li>
        <li>Ù…Ø³ÛŒØ± Ø¬Ù†ÙˆØ¨ â†’ Ù…Ø±Ú©Ø²</li>
      </ul>
    </div>

    <div>
      <div id="liveMap" class="rounded-xl shadow-lg"></div>
    </div>
  </div>
</section>

<!-- WIZARD ORDER FORM -->
<section id="order" class="py-20">
  <div class="max-w-3xl mx-auto px-6">
    <h2 class="text-3xl font-bold mb-6 text-center">ÙØ±Ù… Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´ Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ</h2>

    <div class="bg-white p-6 rounded-xl shadow">
      <div id="step1" class="wizard-step active">
        <label class="block text-sm font-medium">Ù…Ø¨Ø¯Ø§</label>
        <input id="w_from" type="text" class="w-full border p-3 rounded mt-2" placeholder="Ù…Ø«Ø§Ù„: ØªÙ‡Ø±Ø§Ù†" />
        <button onclick="nextStep()" class="mt-4 px-6 py-2 bg-blue-600 text-white rounded">Ø¨Ø¹Ø¯ÛŒ</button>
      </div>

      <div id="step2" class="wizard-step">
        <label class="block text-sm font-medium">Ù…Ù‚ØµØ¯</label>
        <input id="w_to" type="text" class="w-full border p-3 rounded mt-2" placeholder="Ù…Ø«Ø§Ù„: Ø§ØµÙÙ‡Ø§Ù†" />
        <div class="flex gap-3 mt-4">
          <button onclick="prevStep()" class="px-4 py-2 border rounded">Ù‚Ø¨Ù„ÛŒ</button>
          <button onclick="nextStep()" class="px-6 py-2 bg-blue-600 text-white rounded">Ø¨Ø¹Ø¯ÛŒ</button>
        </div>
      </div>

      <div id="step3" class="wizard-step">
        <label class="block text-sm font-medium">Ù†ÙˆØ¹ Ø¨Ø§Ø±</label>
        <input id="w_type" type="text" class="w-full border p-3 rounded mt-2" placeholder="Ù…Ø«Ø§Ù„: Ù„ÙˆØ§Ø²Ù…" />
        <div class="flex gap-3 mt-4">
          <button onclick="prevStep()" class="px-4 py-2 border rounded">Ù‚Ø¨Ù„ÛŒ</button>
          <button onclick="finishWizard()" class="px-6 py-2 bg-green-600 text-white rounded">Ø«Ø¨Øª Ù†Ù‡Ø§ÛŒÛŒ</button>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- TRACKING -->
<section id="tracking" class="py-20 bg-gray-50">
  <div class="max-w-3xl mx-auto px-6">
    <h2 class="text-3xl font-bold mb-8 text-center">Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ù…Ø±Ø³ÙˆÙ„Ù‡</h2>

    <div class="flex justify-center gap-3 mb-6">
      <input id="trackCode" aria-label="Ú©Ø¯ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ" class="p-3 rounded-md border w-64" placeholder="TRK123456" />
      <button onclick="track()" class="px-4 py-2 rounded-md bg-gradient-to-r from-blue-600 to-cyan-500 text-white">Ù¾ÛŒÚ¯ÛŒØ±ÛŒ</button>
    </div>

    <div id="trackResult" class="mb-6"></div>

    <div id="timeline" class="timeline">
      <!-- timeline items populated dynamically -->
    </div>
  </div>
</section>

<!-- TESTIMONIALS -->
<section class="py-16">
  <div class="max-w-6xl mx-auto px-6">
    <h3 class="text-3xl font-bold text-center mb-8">Ù†Ø¸Ø±Ø§Øª Ù…Ø´ØªØ±ÛŒØ§Ù†</h3>
    <div class="swiper mySwiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide p-6 bg-white rounded-xl shadow">"Ø¨Ø³ÛŒØ§Ø± Ø³Ø±ÛŒØ¹ Ùˆ Ù…Ø·Ù…Ø¦Ù†" â€” Ø­Ø³ÛŒÙ†</div>
        <div class="swiper-slide p-6 bg-white rounded-xl shadow">"Ø¨Ø§Ø± Ø¨Ù‡â€ŒÙ…ÙˆÙ‚Ø¹ Ø±Ø³ÛŒØ¯" â€” Ù…Ø±ÛŒÙ…</div>
        <div class="swiper-slide p-6 bg-white rounded-xl shadow">"Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¹Ø§Ù„ÛŒ" â€” Ø§Ø­Ù…Ø¯</div>
      </div>
      <div class="swiper-pagination"></div>
    </div>
  </div>
</section>

<!-- PRICING (simple) -->
<section id="pricing" class="py-16 bg-white">
  <div class="max-w-6xl mx-auto px-6">
    <h3 class="text-3xl font-bold text-center mb-8">ØªØ¹Ø±ÙÙ‡â€ŒÙ‡Ø§</h3>
    <div class="grid md:grid-cols-3 gap-6">
      <div class="p-6 rounded-xl shadow card">
        <div class="text-sm text-gray-500">ÙˆØ§Ù†Øª</div>
        <div class="text-2xl font-bold mt-2">Û±Û²Û°,Û°Û°Û° ØªÙˆÙ…Ø§Ù†</div>
        <p class="text-sm text-gray-600 mt-2">Ø¯Ø±ÙˆÙ†â€ŒØ´Ù‡Ø±ÛŒØŒ ØªØ§ ÛµÛ°Û° Ú©ÛŒÙ„Ùˆ</p>
      </div>
      <div class="p-6 rounded-xl shadow card">
        <div class="text-sm text-gray-500">Ø®Ø§ÙˆØ±</div>
        <div class="text-2xl font-bold mt-2">Û³Û´Û¹,Û°Û°Û° ØªÙˆÙ…Ø§Ù†</div>
        <p class="text-sm text-gray-600 mt-2">Ø¨ÛŒÙ†â€ŒØ´Ù‡Ø±ÛŒØŒ Ø¨ÛŒÙ…Ù‡ Ú©Ø§Ù…Ù„</p>
      </div>
      <div class="p-6 rounded-xl shadow card">
        <div class="text-sm text-gray-500">Ú©Ø§Ù…ÛŒÙˆÙ†</div>
        <div class="text-2xl font-bold mt-2">ÛµÛ¹Û¹,Û°Û°Û° ØªÙˆÙ…Ø§Ù†</div>
        <p class="text-sm text-gray-600 mt-2">Ø­Ù…Ù„ Ø³Ù†Ú¯ÛŒÙ†ØŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Û²Û´/Û·</p>
      </div>
    </div>
  </div>
</section>

<!-- CONTACT & FOOTER -->
<footer id="contact" class="bg-gray-900 text-white py-12">
  <div class="max-w-7xl mx-auto px-6 grid md:grid-cols-3 gap-6">
    <div>
      <h4 class="font-bold mb-2">Ø¨Ø§Ø±Ø¨Ø±ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ†</h4>
      <p class="text-gray-300">Ø§Ø±Ø³Ø§Ù„ Ø§Ù…Ù† Ùˆ Ø³Ø±ÛŒØ¹. Ø¨ÛŒÙ…Ù‡ Ùˆ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Û²Û´ Ø³Ø§Ø¹ØªÙ‡.</p>
    </div>
    <div>
      <h4 class="font-bold mb-2">ÙØ±Ù… ØªÙ…Ø§Ø³</h4>
      <form id="contactForm" class="space-y-2 text-sm">
        <input name="name" placeholder="Ù†Ø§Ù…" class="w-full p-2 rounded-md text-black" />
        <input name="email" placeholder="Ø§ÛŒÙ…ÛŒÙ„" class="w-full p-2 rounded-md text-black" />
        <textarea name="message" placeholder="Ù¾ÛŒØ§Ù…" class="w-full p-2 rounded-md text-black"></textarea>
        <button type="button" onclick="submitContact()" class="px-4 py-2 rounded-md bg-gradient-to-r from-blue-600 to-cyan-400 text-white">Ø§Ø±Ø³Ø§Ù„</button>
      </form>
    </div>
    <div>
      <h4 class="font-bold mb-2">Ø§Ø±ØªØ¨Ø§Ø·</h4>
      <p class="text-gray-300">ØªÙ„ÙÙ†: 021-12345678</p>
      <p class="text-gray-300">Ø§ÛŒÙ…ÛŒÙ„: support@example.com</p>
      <div class="mt-3 flex gap-3">
        <a class="text-gray-300 hover:text-white">Ø§ÛŒÙ†Ø³ØªØ§Ú¯Ø±Ø§Ù…</a>
        <a class="text-gray-300 hover:text-white">ØªÙ„Ú¯Ø±Ø§Ù…</a>
        <a class="text-gray-300 hover:text-white">ÙˆØ§ØªØ³Ø§Ù¾</a>
      </div>
    </div>
  </div>
  <div class="text-center text-gray-500 mt-6">Â© 2025 BarBari. Ù‡Ù…Ù‡ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª.</div>
</footer>

<!-- ORDER MODAL -->
<div id="orderModal" class="fixed inset-0 z-50 hidden items-center justify-center">
  <div class="modal-backdrop absolute inset-0"></div>
  <div class="relative bg-white rounded-xl shadow-lg w-full max-w-lg p-6">
    <button onclick="closeOrderModal()" class="absolute left-4 top-4">âœ•</button>
    <h4 class="text-xl font-bold mb-3">Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù†Ø§ÙˆÚ¯Ø§Ù†</h4>
    <p class="text-sm text-gray-600 mb-4">ÙØ±Ù… Ø²ÛŒØ± Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯ ØªØ§ ØªÛŒÙ… Ù…Ø§ Ø¨Ø§ Ø´Ù…Ø§ ØªÙ…Ø§Ø³ Ø¨Ú¯ÛŒØ±Ø¯.</p>
    <form id="orderForm" class="space-y-3 text-sm">
      <input name="o_from" placeholder="Ù…Ø¨Ø¯Ø§" class="w-full p-3 rounded-md border" />
      <input name="o_to" placeholder="Ù…Ù‚ØµØ¯" class="w-full p-3 rounded-md border" />
      <input name="o_phone" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³" class="w-full p-3 rounded-md border" />
      <div class="flex justify-end gap-3">
        <button type="button" onclick="closeOrderModal()" class="px-3 py-2 rounded-md">Ø§Ù†ØµØ±Ø§Ù</button>
        <button type="button" onclick="submitOrder()" class="px-3 py-2 rounded-md bg-blue-600 text-white">Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª</button>
      </div>
    </form>
  </div>
</div>

<!-- SCRIPTS -->
<script>
  // Mobile toggle
  function toggleMobile(show){ document.getElementById('mobileMenu').style.display = show ? 'block' : 'none'; }
  const openMenuEl = document.getElementById('openMenu');
  if(openMenuEl) openMenuEl.addEventListener('click', ()=> toggleMobile(true));

  // Dark mode toggle (persist)
  const themeToggle = document.getElementById('themeToggle');
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
  if(themeToggle){ if(localStorage.theme === 'dark' || (!localStorage.theme && prefersDark)){ document.documentElement.classList.add('dark'); themeToggle.textContent='â˜€ï¸' }}
  if(themeToggle) themeToggle.addEventListener('click', ()=>{
    document.documentElement.classList.toggle('dark');
    localStorage.theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
    themeToggle.textContent = document.documentElement.classList.contains('dark') ? 'â˜€ï¸' : 'ğŸŒ™';
  });

  // Swiper init
  try{
    if(window.Swiper){
      const swiper = new Swiper('.mySwiper', { loop:true, pagination:{ el:'.swiper-pagination', clickable:true }, autoplay:{ delay:4000 }});
    }
  }catch(e){ console.warn('Swiper init failed', e); }

  // GSAP
  try{ if(window.gsap){ gsap.from('.gradient-text',{ y:20, opacity:0, duration:0.8, ease:'power3.out' }); gsap.from('.card',{ y:20, opacity:0, duration:0.8, stagger:0.08, ease:'power3.out' }); }}catch(e){ console.warn('GSAP failed', e); }

  // Wizard functions
  let step = 1;
  function nextStep(){ if(step<3){ document.getElementById(`step${step}`).classList.remove('active'); step++; document.getElementById(`step${step}`).classList.add('active'); } }
  function prevStep(){ if(step>1){ document.getElementById(`step${step}`).classList.remove('active'); step--; document.getElementById(`step${step}`).classList.add('active'); } }
  function finishWizard(){ const from = document.getElementById('w_from').value || ''; const to = document.getElementById('w_to').value || ''; const type = document.getElementById('w_type').value || ''; alert(`Ø³ÙØ§Ø±Ø´ Ø«Ø¨Øª Ø´Ø¯:\\nÙ…Ø¨Ø¯Ø§: ${from}\\nÙ…Ù‚ØµØ¯: ${to}\\nÙ†ÙˆØ¹ Ø¨Ø§Ø±: ${type}`); document.getElementById('w_from').value=''; document.getElementById('w_to').value=''; document.getElementById('w_type').value=''; step=1; document.getElementById('step3').classList.remove('active'); document.getElementById('step2').classList.remove('active'); document.getElementById('step1').classList.add('active'); }

  // Tracking
  function track(){ const code = document.getElementById('trackCode').value.trim(); const out = document.getElementById('trackResult'); const tl = document.getElementById('timeline'); if(tl) tl.innerHTML=''; if(!code){ if(out) out.textContent='Ù„Ø·ÙØ§Ù‹ Ú©Ø¯ Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.'; return; } const states=['Ø«Ø¨Øª Ø´Ø¯Ù‡','ØªØ­ÙˆÛŒÙ„ Ø±Ø§Ù†Ù†Ø¯Ù‡','Ø¯Ø± Ù…Ø³ÛŒØ±','Ù…Ø±Ú©Ø² ØªÙˆØ²ÛŒØ¹','ØªØ­ÙˆÛŒÙ„ Ø´Ø¯']; const idx = Math.abs(code.split('').reduce((a,c)=>a + c.charCodeAt(0),0)) % states.length; if(out) out.innerHTML = `<div class="p-4 bg-white rounded-md text-right">Ú©Ø¯: <strong>${code}</strong><br>ÙˆØ¶Ø¹ÛŒØª: <strong>${states[idx]}</strong></div>`; for(let i=idx;i>=0;i--){ const div=document.createElement('div'); div.className='timeline-item'; div.innerHTML = `<div class="text-sm font-bold">${states[i]}</div><div class="text-xs text-gray-600">${new Date(Date.now() - (idx-i)*3600*1000).toLocaleString()}</div>`; if(tl) tl.appendChild(div); } }

  // Order modal
  function openOrderModal(){ const modal = document.getElementById('orderModal'); if(modal){ modal.style.display='flex'; modal.classList.remove('hidden'); } }
  function closeOrderModal(){ const modal = document.getElementById('orderModal'); if(modal){ modal.style.display='none'; modal.classList.add('hidden'); } }
  function submitOrder(){ alert('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø´Ù…Ø§ Ø«Ø¨Øª Ø´Ø¯. Ø§Ù¾Ø±Ø§ØªÙˆØ± Ø¨Ø§ Ø´Ù…Ø§ ØªÙ…Ø§Ø³ Ø®ÙˆØ§Ù‡Ø¯ Ú¯Ø±ÙØª.'); closeOrderModal(); const form = document.getElementById('orderForm'); if(form) form.reset(); }

  // Contact
  function submitContact(){ alert('Ù¾ÛŒØ§Ù… Ø´Ù…Ø§ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯ â€” ØªÛŒÙ… Ù…Ø§ Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ù¾Ø§Ø³Ø® Ø®ÙˆØ§Ù‡Ø¯ Ø¯Ø§Ø¯.'); const cf = document.getElementById('contactForm'); if(cf) cf.reset(); }

  // Map init + Iran transit routes + markers
  try{
    if(window.L){
      const mapEl = document.getElementById('liveMap');
      if(mapEl){
        const map = L.map('liveMap', { scrollWheelZoom:false }).setView([32.4279, 53.6880], 5.6);

        // tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '&copy; OpenStreetMap contributors' }).addTo(map);

        // transit routes (approximate)
        const transitRoutes = [
          { name: 'ØªÙ‡Ø±Ø§Ù† â†’ Ù‚Ù… â†’ Ø§ØµÙÙ‡Ø§Ù† â†’ Ø´ÛŒØ±Ø§Ø²', coords: [[35.6892,51.3890],[34.6401,50.8764],[32.6539,51.6660],[29.5918,52.5837]] },
          { name: 'ØªØ¨Ø±ÛŒØ² â†’ Ø²Ù†Ø¬Ø§Ù† â†’ Ù‚Ø²ÙˆÛŒÙ† â†’ ØªÙ‡Ø±Ø§Ù†', coords: [[38.0962,46.2738],[36.6736,48.4787],[36.2688,50.0041],[35.6892,51.3890]] },
          { name: 'Ù…Ø´Ù‡Ø¯ â†’ Ø³Ø¨Ø²ÙˆØ§Ø± â†’ Ø³Ù…Ù†Ø§Ù† â†’ ØªÙ‡Ø±Ø§Ù†', coords: [[36.2605,59.6168],[36.2126,57.6762],[35.5750,53.3949],[35.6892,51.3890]] }
        ];

        transitRoutes.forEach(route=>{
          L.polyline(route.coords, { color:'#3b82f6', weight:4, opacity:0.9 }).addTo(map).bindPopup(route.name);
        });

        // sample fleet markers
        const vehicles = [
          { name:'Ù†Ø§ÙˆÚ¯Ø§Ù† ØªÙ‡Ø±Ø§Ù†', coords:[35.6892,51.3890] },
          { name:'Ù†Ø§ÙˆÚ¯Ø§Ù† Ø§ØµÙÙ‡Ø§Ù†', coords:[32.6546,51.6680] },
          { name:'Ù†Ø§ÙˆÚ¯Ø§Ù† Ù…Ø´Ù‡Ø¯', coords:[36.2605,59.6168] }
        ];

        vehicles.forEach(v=>{
          L.circleMarker(v.coords, { radius:7, fillColor:'#06b6d4', color:'#fff', weight:1, fillOpacity:1 }).addTo(map).bindPopup(`<strong>${v.name}</strong>`);
        });

        // fit map to show Iran nicely
        const allCoords = transitRoutes.flatMap(r => r.coords);
        const latlngs = allCoords.map(c => [c[0], c[1]]);
        try{ map.fitBounds(latlngs, { padding:[50,50] }); }catch(e){ /* ignore */ }
      }
    }
  }catch(e){ console.warn('Leaflet map failed', e); }

  // Download HTML snapshot (single-file)
  const downloadBtn = document.getElementById('downloadHtml');
  if(downloadBtn){
    downloadBtn.addEventListener('click', ()=>{
      try{
        const docHtml = '<!doctype html>\\n' + document.documentElement.outerHTML;
        const blob = new Blob([docHtml], { type: 'text/html;charset=utf-8' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a'); a.href=url; a.download='barbari-landing.html'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
      }catch(err){ console.error('Download failed', err); alert('Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø§Ù†Ø¬Ø§Ù… Ù†Ø´Ø¯ â€” Ù„Ø·ÙØ§Ù‹ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯.'); }
    });
  }

  // keyboard accessibility
  document.addEventListener('keydown', e=>{ if(e.key==='Escape'){ closeOrderModal(); toggleMobile(false); } });

  // expose some functions globally (for inline onclick)
  window.nextStep = nextStep; window.prevStep = prevStep; window.finishWizard = finishWizard; window.track = track;
  window.openOrderModal = openOrderModal; window.closeOrderModal = closeOrderModal; window.submitOrder = submitOrder;
  window.submitContact = submitContact; window.toggleMobile = toggleMobile;
</script>

</body>
</html>
