{#{% extends 'base.html' %}#}
{% load static %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>پیش‌نمایش بیجک</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">

    <style>
        body {
            font-family: "Vazirmatn", "Tahoma", sans-serif;
            background-color: #f8f9fa;
        }

        .bijak-card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, .1);
            margin-bottom: 20px;
        }

        .bijak-header {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            padding: 12px;
            border-radius: 12px 12px 0 0;
        }

        .table th {
            background-color: #f1f3f5;
            text-align: center;
        }

        .table td {
            vertical-align: middle;
        }

        .section-title {
            font-weight: bold;
            margin: 15px 0 8px;
            color: #343a40;
            border-right: 4px solid #0d6efd;
            padding-right: 8px;
        }

        .btn {
            min-width: 120px;
        }

        .bijak-card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .bijak-header {
            background: #f8f9fa;
            border-bottom: 2px solid #007bff;
            padding: 15px;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
        }

        .section-title {
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: bold;
            color: #007bff;
        }

        table th {
            background: #f1f1f1;
        }

        input, select, textarea {
            text-align: center !important;
        }
    </style>
</head>
<body>


<div class="container my-4">

    <div class="text-center my-4">
        <h3>ویرایش بیجک</h3>
        <p class="text-muted">در این صفحه می‌توانید اطلاعات بیجک را به‌روزرسانی کنید (کد رهگیری قابل ویرایش
            نیست).</p>
    </div>

    <form method="post" class="bijak-form">
        {% csrf_token %}

        <!-- دکمه‌های بالا -->
        <div class="text-center mb-4">
            <button type="submit" class="btn btn-success px-4">ذخیره تغییرات</button>
            <a href="{% url 'preview' bijak.pk %}" class="btn btn-secondary px-4">بازگشت</a>
        </div>

        <!-- کارت اصلی -->
        <div class="bijak-card">
            <div class="bijak-header d-flex justify-content-between align-items-center">
                <span><strong>کد رهگیری:</strong> {{ bijak.tracking_code }}</span>
                <h4 class="m-0">ویرایش بیجک</h4>
            </div>
            <div class="p-4">

                <!-- اطلاعات کلی -->
                <h5 class="section-title">اطلاعات بیجک</h5>
                <table class="table table-bordered text-center align-middle">
                    <tr>
                        <th>تاریخ صدور</th>
                        <th>کرایه پرداختی</th>
                        <th>ارزش محموله</th>
                        <th>مبدا بارگیری</th>
                        <th>مقصد تخلیه</th>
                        <th>مبلغ بیمه</th>
                        <th>هزینه خدمات</th>
                    </tr>
                    <tr>
                        <td>{{ bijak_form.issuance_date }}</td>
                        <td>{{ bijak_form.total_fare }}</td>
                        <td>{{ bijak_form.value }}</td>
                        <td>{{ cargo_form.origin }}</td>
                        <td>{{ cargo_form.destination }}</td>
                        <td>{{ bijak_form.insurance }}</td>
                        <td>{{ bijak_form.loading_fee }}</td>
                    </tr>
                </table>

                <!-- فرستنده -->
                <h5 class="section-title">اطلاعات فرستنده</h5>
                <table class="table table-bordered align-middle text-center">
                    <tr>
                        <th>نام و نام خانوادگی</th>
                        <th>شناسه/کد ملی</th>
                        <th>کد پستی</th>
                        <th>آدرس</th>
                        <th>تلفن</th>
                        <th>تلفن دوم</th>
                    </tr>
                    <tr>
                        <td>{{ sender_form.name }}</td>
                        <td>{{ sender_form.national_id }}</td>
                        <td>{{ sender_form.postal }}</td>
                        <td>{{ sender_form.address }}</td>
                        <td>{{ sender_form.phone }}</td>
                        <td>{{ sender_form.phone2 }}</td>
                    </tr>
                </table>

                <!-- گیرنده -->
                <h5 class="section-title">اطلاعات گیرنده</h5>
                <table class="table table-bordered align-middle text-center">
                    <tr>
                        <th>نام و نام خانوادگی</th>
                        <th>شناسه/کد ملی</th>
                        <th>کد پستی</th>
                        <th>آدرس</th>
                        <th>تلفن</th>
                        <th>تلفن دوم</th>
                    </tr>
                    <tr>
                        <td>{{ receiver_form.name }}</td>
                        <td>{{ receiver_form.national_id }}</td>
                        <td>{{ receiver_form.postal }}</td>
                        <td>{{ receiver_form.address }}</td>
                        <td>{{ receiver_form.phone }}</td>
                        <td>{{ receiver_form.phone2 }}</td>
                    </tr>
                </table>

                <!-- راننده -->
                <h5 class="section-title">اطلاعات راننده</h5>
                <table class="table table-bordered align-middle text-center">
                    <tr>
                        <th>نام و نام خانوادگی</th>
                        <th>کد ملی</th>
                        <th>تاریخ تولد</th>
                        <th>شماره گواهی‌نامه</th>
                        <th>تاریخ صدور</th>
                        <th>موبایل</th>
                        <th>تلفن دوم</th>
                        <th>آدرس منزل</th>
                    </tr>
                    <tr>
                        <td>{{ driver_form.name }}</td>
                        <td>{{ driver_form.national_id }}</td>
                        <td>{{ bijak_form.driver_birth_date }}</td>
                        <td>{{ bijak_form.driver_certificate }}</td>
                        <td>{{ bijak_form.driver_certificate_date }}</td>
                        <td>{{ driver_form.phone }}</td>
                        <td>{{ driver_form.phone2 }}</td>
                        <td>{{ driver_form.address }}</td>
                    </tr>
                </table>

                <!-- خودرو -->
                <h5 class="section-title">اطلاعات خودرو</h5>
                <table class="table table-bordered text-center align-middle">
                    <tr>
                        <th>پلاک</th>
                        <th>نوع وسیله</th>
                    </tr>
                    <tr>
                        <td>
                            {{ vehicle_form.license_plate_two_digit }}
                            {{ vehicle_form.license_plate_alphabet }}
                            {{ vehicle_form.license_plate_three_digit }}
                            {{ vehicle_form.license_plate_series }}
                        </td>
                        <td>{{ vehicle_form.type }}</td>
                    </tr>
                </table>

                <!-- محموله -->
                <h5 class="section-title">اطلاعات محموله</h5>
                <table class="table table-bordered text-center align-middle">
                    <tr>
                        <th>شرح محموله</th>
                        <th>وزن/حجم</th>
                        <th>نوع بسته‌بندی</th>
                        <th>تعداد بسته</th>
                    </tr>
                    <tr>
                        <td>{{ cargo_form.name }}</td>
                        <td>{{ cargo_form.weight }}</td>
                        <td>{{ cargo_form.package_type }}</td>
                        <td>{{ cargo_form.number_of_packaging }}</td>
                    </tr>
                </table>

                <!-- توضیحات -->
                <h5 class="section-title">توضیحات پاورقی</h5>
                <table class="table table-bordered text-center align-middle">
                    <tr>
                        <th>شرح توضیحات</th>
                    </tr>
                    <tr>
                        <td>{{ bijak_form.final_description }}</td>
                    </tr>
                </table>

                <!-- دکمه‌های پایین -->
                <div class="text-center mt-4">
                    <button type="submit" class="btn btn-success px-4">ذخیره تغییرات</button>
                    <a href="{% url 'preview' bijak.pk %}" class="btn btn-secondary px-4">انصراف</a>
                </div>
            </div>
        </div>
    </form>
</div>

</body>
</html>
